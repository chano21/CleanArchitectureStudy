
# 오늘 토론인상깊었던점을 정리한다. :

- 우리는 업무파악할때 항상 데이터베이스의 구조를 기준으로 생각해왔다. 예를들어 ERD나 데이터베이스 스키마들로 데이터구조를 
확인한다. 그러기에 데이터베이스의 구조가 우리의 도메인기준이 되어왔다.

- 우리는 개발을할때 웹 -> 도메인 -> 영속성 이 구조로 개발해왔으며 마지막 종단레이어(영속성)이 점점 비대해짐을 자신도 알고는있지만 어쩔수없이 로직들을 종단레이어에 넣는상황이 많아졌다. 이 책에서는 깨진 유리창 이론이라고 말했는데, 나도 이부분을 인지하고있었다. 나에게 주어진유리창이 깨끗한 유리창이라면 열심히 닦거나 안깨지게 조심했을텐데 한번 깨진유리창이라면 덕지덕지 테이프를 붙이던지해서 결국 더러워지기 때문이다.

- ORM을 쓰면서 데이터베이스 중심의 설계에대해 스터디분 세분과 여러문제점에대해 이야기를 나누었는데, 누구는 쿼리중심으로 개발을하고, 누구는 controller단에서도 repository레이어에 다이렉트로 접근하여 처리하신 경험들을 공유해주셨다. 이책에서도 이런부분에대해 계층형아키텍쳐의 문제점을 꼬집고있었다.

- 한번은 헬퍼에 대해서도 스터디분께서 이야기를 주셨는데, 이 책에서 정의된 "헬퍼" 의 정의는 무엇인지 궁금해하시길래 나도 곰곰히생각해보았는데, 엑셀작업을하면서 controller -> service 즉 service에서 엑셀작업을하던기억을 공유하며 이런식의 헬퍼인지 서로 확인하며 utility성격이란점을 이야기했었다. 헬퍼클래스를 만들때 내기억엔 이 레이어는 대체 어디에위치했었지? 생각하면서 돌아보게되었는데, 나도 에라이모르겠다하면서 util package쪽에 정리했던 기억이있다. 이러한부분이 앞으로 책에서 좀더 깊게설명해주겠지..? 생각은든다.

- 나는 요즘 테스트코드에대해 많은관심을 가지고있는상황이다. 스터디분들의 테스트코드작성사례가 나랑 어느정도 의견이 비슷비슷한것도 해서 기억나는데, 이책에서는 테스트를 작성하기 힘든것을 문제로 삼고있었다. 예를들어보면, 얼마전에도 겪은일이지만 A 서비스를 가지고 특정기능테스트를하려는데, 다른 서비스의 의존성을 생각하며 관리해야되거나, A서비스의 엄청나게 비대해진 코드들을 해석하면서 테스트환경을 구축하는것에대한 비용이라던지.. 그런점이 좀 와닿았는데 이책에서도 그런문제가 쌓이고 쌓이다보면 본인도 모르게 테스트를 잘 안하게되는것을 꼬집고있었다. 이부분은 추후에 다뤄질것이라 기대한다.

- 2장 쯤 시작할때 의존성관련해서 많은 주제가 나왔는데, 아직까지는 이 의존들을 확실히 분리하는 방법에대해서는 좀더 봐야할거같다. 내가 그냥 생각하기엔 some service -> A,B,C interface -> A,B,C service 이런식으로 중간에 인터페이스를 둬서 의존관계를 끊고 테스트목적으로는 내가원하는 some의 A 서비스를 테스트하면 좋긴하겠다..생각은 들었다. 스터디분이 이야기하신게 이런건가..? 근데 이렇게하면 문제가 항상 도중에 interface를 둬서 하는 그런 작업이 더 필요하다..^^

- 그리고 보기좋은 유지보수코드를 만드려면 결국 여러가지 클래스를 만들어줘야하는데, 이부분에대해선 다들 힘들지만 그렇게 해야함을 잘 알고계셔서 우리의 숙명이거니 생각했다. (사실 책에서도 그렇다)

- 나는 헥사고날 아키텍쳐에대해 근래들어 관심이 많이 생긴사람인지라 이 클린아키텍쳐를 공부하는것도 그에대한 영향이 있다.
이 책에서는 클린아키텍쳐(동그라미 안에 여러동그라미있음)와 헥사고날 아키텍쳐(육각형의 모양)을 주제로 설명을 시작하고있는데, 
클린아키텍쳐의 이론은 너무 추상적인지라 , 헥사고날 아키텍쳐를 기준으로 이 책은 가이드를 주는것같다. 난 이점에서 더 기대가된다. 

- 헥사고날 아키텍쳐 그림을보면서 다른분들도 이 그림이 설명하고자하는것에대해 서로 이게맞는건가 저게맞는건가 하면서 주고받았었는데.. 
1. driving adapter -> driving port -> domain -> driven port -> driven adapter
2. driving adapter <- driving port <- domain <- driven port <- driven adapter
서로 이야기를 나누면서 정리한결론은 일단 난 이렇게 생각한다. 
driving adapter는 web,app,event publisher, resttemplate... 등등이 될수있고 driven adapter는 repository, event consumer,등등이
될수있다 생각한다. 뭐 이건 아직까지 책내용에대해 좀더 깊게 토론하면서 정의를내려야할것같다.

- 토론이 끝나고 몇개 볼만한 url들을 공유해드렸는데..
1. hexagon architecture 창시자 알리스타콕번의 인터뷰 글 : https://jmgarridopaz.github.io/content/interviewalistair.html
2. 라인에서 설명하는 헥사고날아키텍쳐 글 : https://engineering.linecorp.com/ko/blog/port-and-adapter-architecture/
3. 넷플릭스에서의 헥사고날 아키텍쳐글 : https://netflixtechblog.com/ready-for-changes-with-hexagonal-architecture-b315ec967749
4. 스터디분이 정리하신 오늘내용 관련해서 보면 좋을내용 : https://github.com/dk-ko/Today-I-Learned/blob/main/seminar/%EC%9A%B0%EC%95%84%ED%95%9C%20%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5%20-%20%ED%8C%A8%ED%82%A4%EC%A7%80%20%EC%9D%98%EC%A1%B4%EC%84%B1%20%EB%B6%84%EB%A6%AC.md.md

이렇게 링크를 남긴다.

